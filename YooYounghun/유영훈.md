# 개발 일지
<hr>

## 23.01.10
  
  ### 아이디어 회의 및 branch 생성.
  - 제안한 아이디어
    - 스터디 플랫폼
      - https://www.notion.so/0cc47669997d43c38edd677619cc2335#d8eb84f4c11548fc8f1558ef5a52ac19
  - 선정된 아이디어
    - 예술 경매 플랫폼 (김이슬)
      - https://www.notion.so/3e0b7cbc1efd45c892dc14f63fdf46c6#d9be59512c8e4e24808bee256a20037c
    - 화상회의 다시보기 최적화 서비스 (이상민)
      - https://www.notion.so/71de8af02f9b4e8da6a77519adaa01b8
    - 오늘 뭐먹지? (김우진)
      - https://www.notion.so/e3a4b717f9334e10ae969a448d3f9502

    - 예정 : 아이디어 초안(이력서 관리 플랫폼)을 고도화 시키면서 그대로 가져가거나 위 아이디어들을 가지고 컨설팅 받을 예정

  ### jpa 학습 진행 중.
  - EntityManagerFactory는 영속 단위 기준으로 초기화 한다.
    - persistence.xml 파일에 정의한 영속 단위 기준으로 초기화
    - 필요한 자원 생성
    - 커넥션풀과 같은 DB연동에 있어 필요한 자원을 생성한다.
  - EntityManager로 DB연동에 대한 모든 것을 처리한다.
  - EntityTransaction으로 트랜잭션 처리를 한다.
    - 모든 DB 작업은 트랜잭션이 열리고 닫히기 전에 처리한다.
  - CRUD : persist(), find(), remove()
    - update는 트랜잭션 사이에 바뀐 객체가 있다면 자동으로 반영이 된다.

<hr>

## 23.01.11

  ### jpa 학습 진행 중.
  - 왜 JPA를 사용해야 하는가?
    - SQL 중심적인 개발에서 객체 중심의 개발
    - 패러다임 불일치 해결
      - 상속, 연관관계, 객체 그래프 탐색, 비교하기 같은 패러다임 불일치 해결
    - 개발자가 작성해야할 SQL과 JDBC API 코드를 JPA가 대신 처리해줌으로 유지보수 해야하는 코드가 줄어든다.
    - 생산성
      - 컬렉션에 객체를 저장하듯 JPA에게 저장할 객체를 전달
      - insert 쿼리를 작성하고 JDBC API를 사용하는 등의 일을 대신 처리
    - 유지보수
      - 엔티티에 필드 추가시 쿼리를 모두 변경해야 한다.
    
  - JPA의 성능 최적화 기능
    - 1차 캐시와 동일성 보장 : 캐싱 기능
      - 같은 트랜잭션 안에서는 같은 엔티티를 반환(크게 도움은 안되고 약간의 조회 성능 향상)
      - 결과적으로 SQL을 한 번만 실행
    - 트랜잭션을 지원하는 쓰기 지연 : 버퍼링 기능
      - 트랜잭션을 커밋할 때까지 INSERT(persist의 예를 들었을 경우) SQL을 메모리에 쌓는다.
      - JDBC Batch SQL 기능을 사용해 한 번에 SQL을 전송한다.
        - 지연 로딩 전략 옵션을 사용한다.
      - UPDATE, DELETE SQL의 경우 커밋 시 SQL 실행 후 바로 커밋.
      
<hr>

## 23.01.12

  ### jwt 학습 진행 중.
  - jwt란?

    - RFC 7519
    - 세션과 같은 인증에서 자주 사용되며, json포맷을 이용하여 사용자에 대한 속성을 저장하는 Claim기반의 web token
    - Claim?
        - 사용자에 대한 포로퍼티, 속성을 의미
        - 토큰 자체가 정보를 가지고 있다는 뜻

  - 구성요소
    - `.` 으로 구분하여 3가지의 문자열로 구성
    - 헤더(header), 내용(payload), 서명(signature)으로 구성

  - 헤더(header)
    - 헤더에서는 해싱 알고리즘 방식을 지정, 서명 및 토큰 검증에 사용한다.
      - 공격
        - alg:none, role을 admin으로 하여 공격

  - 내용(payload)
    - 토큰에서 사용할 정보의 조각들인 클레임(Claim)이 담겨있다
      - 토큰의 내용은 확인이 가능하기 때문에 최소한의 정보를 넣어야 한다.
    - json형태로 key/value형태로 다수의 정보를 넣을 수 있다.
      - 너무많으면 토큰의 길이가 길어진다.
  
  - 클레임의 종류
    - 등록된 클레임
      - 서비스에 필요한 정보가 아닌, 토큰에 대한 정보들을 담기 위하여 이름이 이미 정해진 클레임
      - 클레임의 사용은 모두 선택적
      - `iss` : 토큰 발급자 (issuer)
      - `sub` : 토큰 제목 (subject)
      - `aud` : 토큰 대상자 (audience)
      - `exp` : 토큰의 만료 시간(expiration), 시간은 NumericDate 형식으로 되어있어야 하며 언제나 현재 시간보다 이후로 설정되어 있어야 합니다.
      - `nbf` : Not before을 의미하며, 토큰의 활성 날짜와 비슷한 개념입니다. 여기에도 NumericDate형식으로 날짜를 지정하며, 이 날짜가 지정하며, 이 날짜가 지나기 전까지는 토큰이 처리되지 않습니다.
      - `iat` : 토큰이 발급된 시간(issued at), 이 값을 사용하여 토큰의 age가 얼마나 되었는지 판단 할 수 있습니다.
      - `jti` : JWT의 고유 식별자로서, 주로 중복적인 처리를 방지하기 위하여 사용됩니다. 일회용 토큰에 사용하면 유용합니다.
    - 공개 클레임
      - 충돌이 방지된 이름을 가지고있어야 합니다. 충돌을 방지하기 위해 URI형식으로 짓습니다.

    - 비공개 클레임
      - 양측 (클라이언트, 서버)간에 합의하에 사용되는 클레임
      - 임의로 지정한 정보를 저장
      - 중복되지 않도록 유의해야 합니다.

    - 서명(Signature)
      - 유효성 검증을 할때 사용하는 고유한 암호화 코드
      - 헤더의 인코딩값, 정보의 인코딩값을 합친후, 주어진 비밀키로 해쉬하여 생성
        - salt
    - bcrypt
      - 해쉬알고리즘에서 최고
      - 해쉬를 중첩해서 사용하는 방식
      - 시간을 오래걸리도록 한다.
    - 이를 base64형태로 나타낸다.
      
<hr>

## 23.01.13

  ### 아이디어에 대한 기능 명세서 작성
  - https://docs.google.com/spreadsheets/d/1SvHaiSLpfYrtSsCLZ3nhX-IG6ETO2vTrMs1dwcksTqo/edit#gid=0

<hr>

## 23.01.16

  ### 기획 최종 컨설팅, erd 다이어그램에 필요한 데이터 명세, 와이어 프레임
  - 와이어프레임 : https://www.notion.so/7cc1bec8394d42c18adb1d59dc150172
  - 데이터 설계 : https://www.notion.so/ERD-2bcf4a10b26e4d4595cfda4358d0f1bd
  - 컨설팅 회의록 : https://www.notion.so/2023-01-16-e922a4b896dc434fa3d2d430d24dbe63
  
